#discovery-page

  #filters
    #sort.filter
      %h3 Sort
      %ul.links
        %li= link_to "Popular", "#", :class => params[:sort] != "Newest" ? "active" : ""
        %li= link_to "Newest", "#", :class => params[:sort] == "Newest" ? "active" : ""
    #categories.filter
      %h3 Categories
      %ul.links
        - active_categories = params[:category].present? ? params[:category].split("|") : []
        - Story::CATEGORIES.each do |category|
          %li= link_to category, "#", :class => active_categories.include?(category) ? "active" : ""

  %section#creators
    %h1 Creators
    .list
      - @creators.each do |creator|
        %a{:href => user_path(creator)}
          = image_tag creator.avatar.url(:editorial)
          .info
            .name= creator.name
            .bio= truncate(creator.tagline, :length => 180)
  
  %section#content
    %h1 Works
    .list
      - @content.each do |content|
        - if content.text_preview?
          %a.content-preview.small{:href => story_path(content), :class => "#{content.media_type} #{content.template}"}
            .inner
              .image
              .quote= truncate(content.template_text, :length => 140)
            .info
              .title= truncate(content.title, :length => 140)
              .synopsis= truncate(content.synopsis, :length => 280)
        - else
          %a.content-preview.small{:href => story_path(content), :class => content.media_type}
            .inner{:style => "background-image: url(#{content.thumbnail.url(:large)})"}
            .info
              .title= truncate(content.title, :length => 140)
              .synopsis= truncate(content.synopsis, :length => 280)
  

:javascript
  mpq.track('Viewed Discovery');
= javascript_include_tag "discovery"