.user-profile
  = render "users/user_info"
  
  .the-rest
    .tabbed.activity
      
      %ul#activity-nav
        %li= link_to "All", user_path(@user), :class => "active"
        %li= link_to "Rewarding", "#"
        %li= link_to "Content", "#"
        %li= link_to "Support", "#"

      #activity-loading Just a momeant...
      %ul#activity
        = render @activity
        - if @activity.empty?
          #new-user-no-activity
            %h1
              %span Yay! Weâ€™ve given you 5 reward coins (
              %span.coin
              %span ) for free!
            %p
              %span Use these coins to reward others for their great content, which can be found on the
              = link_to "Community Page.", community_path, :class => "community"
            %p
              %span As you start rewarding, and
              = link_to "creating your own content", creations_user_path(current_user)
              %span , you will see a list of that activity and its impact show up here.
            
            #activity-example
              Example activity:
      
      #activity-filter
        .info Filter by type of activity
        %ul#types
          %li.all.selected
            %a{:href => "#", :filter => "all"}
              All activity
              %span.amount= Activity.involving(@user).count
          %li.impact
            %a{:href => "#", :filter => "impact"}
              Impact gained
              %span.amount= Activity.on_impact.involving(@user).count
          %li.rewards-given
            %a{:href => "#", :filter => "rewards-given"}
              Rewards given
              %span.amount= Activity.on_rewards.where(:actor_id => @user.id).count
          %li.rewards-received
            %a{:href => "#", :filter => "rewards-received"}
              Rewards received
              %span.amount= Activity.on_rewards.where(:recipient_id => @user.id).count
          %li.content
            %a{:href => "#", :filter => "content"}
              Content created
              %span.amount= Activity.on_content.involving(@user).count
          %li.badges
            %a{:href => "#", :filter => "badges"}
              Badges earned
              %span.amount= Activity.on_badges.involving(@user).count
          %li.coins
            %a{:href => "#", :filter => "coins"}
              Coins purchased
              %span.amount= Activity.on_purchases.involving(@user).count

:javascript
  var user_id = #{@user.id};
= javascript_include_tag "users/activity"
  
- if me?(@user)
  :javascript
    mpq.track('Viewed My Activity');
- else
  :javascript
    mpq.track('Viewed Activity', {mp_note: '#{@user.name}'});